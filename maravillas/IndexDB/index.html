<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IndexedDB Media - Grupos y Metadatos</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<h1>Guardar Imágenes y Videos con IndexedDB (Grupos y Metadatos)</h1>

<div class="controls metadata-section">
    <h2>Gestionar Metadatos de Grupo</h2>
    <p>Define aquí la información asociada a cada grupo (identificado por su Prefijo).</p>
    <div id="metadataFeedback"></div>

    <label for="metaGroupPrefixInput">Prefijo/Nombre del Grupo:</label>
    <input type="text" id="metaGroupPrefixInput" placeholder="Ej: cenotes_candelaria" required>
    <button id="loadMetaButton" type="button">Cargar Metadatos Existentes</button>

    <label for="metaTargetIndexInput">Target Index:</label>
    <input type="text" id="metaTargetIndexInput" value="targetIndex: 0">

    <label for="metaWebInput">Ruta Web (relativa):</label>
    <input type="text" id="metaWebInput" placeholder=".././pages/grupo.html">

    <label for="metaLocationInput">URL Ubicación (Google Maps u otra):</label>
    <input type="url" id="metaLocationInput" placeholder="http://maps.google.com/...">

    <label for="metaTextInput">Texto Descriptivo:</label>
    <textarea id="metaTextInput" rows="4" placeholder="Describe el grupo aquí..."></textarea>

    <button id="saveMetaButton" type="button">Guardar/Actualizar Metadatos de Grupo</button>
</div>

<div class="controls file-section">
    <h2>Añadir Archivos a un Grupo</h2>
    <p>Una vez definidos los metadatos, añade aquí los archivos al grupo correspondiente.</p>
    <label for="fileGroupPrefixInput">Prefijo/Nombre del Grupo (Debe existir):</label>
    <input type="text" id="fileGroupPrefixInput" placeholder="Ej: cenotes_candelaria" required>

    <label for="mediaInput">Selecciona imágenes o videos:</label>
    <input type="file" id="mediaInput" accept="image/*,video/*,.mind" multiple>

    <button id="saveFilesButton">Añadir Archivos al Grupo</button>
    <div id="fileFeedback"></div>
</div>


<div class="controls display-section">
    <h2>Visualizar y Exportar</h2>
    <div id="displayFeedback"></div>
    <label for="loadGroupInput">Ver Grupo Específico:</label>
    <input type="text" id="loadGroupInput" placeholder="Escribe el prefijo del grupo">
    <button id="loadGroupButton">Cargar Grupo</button>
    <hr>
    <button id="loadAllButton">Cargar Todos los Medios</button>
    <hr>
    <button id="exportJsonButton">Generar JSON y Guardar en Local Storage</button>
</div>

<div id="mediaDisplay">
</div>

<script src="script.js"></script>
</body>
</html>
